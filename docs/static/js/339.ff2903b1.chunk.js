"use strict";(self.webpackChunkspatialsense_temp=self.webpackChunkspatialsense_temp||[]).push([[339],{1814:(n,e,o)=>{o.r(e),o.d(e,{default:()=>u});var a=o(9379),i=o(5043),t=o(2014),r=o(3227),s=o(4077),c=o(4110),l=(o(6299),o(8517)),d=o(1911),p=o(8776),m=o(6819),x=o(5877),h=o(1859),b=o(579);const g={room:n=>{let{data:e}=n;return(0,b.jsxs)("div",{className:"room-node",children:[(0,b.jsxs)("div",{className:"room-header",children:[(0,b.jsx)("span",{className:"room-icon",children:e.icon}),(0,b.jsx)("span",{className:"room-name",children:e.label})]}),(0,b.jsxs)("div",{className:"room-info",children:[(0,b.jsx)("div",{className:"room-size",children:e.size}),(0,b.jsxs)("div",{className:"room-devices",children:[e.deviceCount," devices"]})]})]})},device:n=>{let{data:e}=n;return(0,b.jsxs)("div",{className:"device-node",children:[(0,b.jsx)("div",{className:"device-icon",style:{color:e.color},children:e.icon}),(0,b.jsx)("div",{className:"device-name",children:e.label}),(0,b.jsxs)("div",{className:"device-status",children:[(0,b.jsx)("span",{className:"status-dot ".concat(e.online?"online":"offline")}),e.online?"Online":"Offline"]})]})}},f=[{type:"smart-bulb",name:"Smart Bulb",icon:"\ud83d\udca1",color:"#ffc107"},{type:"camera",name:"Security Camera",icon:"\ud83d\udcf9",color:"#dc3545"},{type:"thermostat",name:"Thermostat",icon:"\ud83c\udf21\ufe0f",color:"#0d6efd"},{type:"sensor",name:"Door Sensor",icon:"\ud83d\udeaa",color:"#28a745"},{type:"speaker",name:"Smart Speaker",icon:"\ud83d\udd0a",color:"#6f42c1"},{type:"outlet",name:"Smart Outlet",icon:"\ud83d\udd0c",color:"#fd7e14"}],u=()=>{const[n,e,o]=(0,t.ck)([]),[u,y,v]=(0,t.fM)([]),[j,w]=(0,i.useState)(!1),[k,N]=(0,i.useState)(null),[C,z]=(0,i.useState)(null),[R,A]=(0,i.useState)("Ready to import floor plan"),S=(0,i.useRef)(null),P=(0,i.useCallback)((n=>y((e=>(0,t.rN)((0,a.A)((0,a.A)({},n),{},{animated:!0}),e)))),[y]),M=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;A(n),setTimeout((()=>A("Ready")),e)},[D,L]=(0,i.useState)(!1),X=()=>{L(!1)};return(0,b.jsxs)("div",{className:"floor-plan-app",children:[(0,b.jsxs)(l.A,{open:D,onClose:X,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,b.jsx)(d.A,{id:"alert-dialog-title",children:"Confirm Clear Canvas"}),(0,b.jsx)(p.A,{children:(0,b.jsx)(m.A,{id:"alert-dialog-description",children:"Are you sure you want to clear all rooms and devices? This action cannot be undone."})}),(0,b.jsxs)(x.A,{children:[(0,b.jsx)(h.A,{onClick:X,color:"primary",children:"Cancel"}),(0,b.jsx)(h.A,{onClick:()=>{e([]),y([]),N(null),M("Canvas cleared"),L(!1)},color:"error",autoFocus:!0,children:"Clear All"})]})]}),(0,b.jsxs)("div",{className:"toolbar",children:[(0,b.jsxs)("div",{className:"toolbar-section",children:[(0,b.jsx)("input",{ref:S,type:"file",accept:"image/*",onChange:async n=>{var o;const a=null===(o=n.target.files)||void 0===o?void 0:o[0];if(!a)return;const i=URL.createObjectURL(a);N(i),w(!0),M("Analyzing floor plan with AI...",5e3);try{var r;const n=new FormData;n.append("file",a);const o=await fetch("https://detect.roboflow.com/".concat("floor-plan_-room-detection/2"),{method:"POST",headers:{Authorization:"Bearer ".concat("YOUR_API_KEY_HERE")},body:n});if(!o.ok)throw new Error("API request failed");const i=(null===(r=(await o.json()).predictions)||void 0===r?void 0:r.map(((n,e)=>{const o={kitchen:{icon:"\ud83c\udf73",name:"Kitchen"},bedroom:{icon:"\ud83d\udecf\ufe0f",name:"Bedroom"},bathroom:{icon:"\ud83d\udebf",name:"Bathroom"},living:{icon:"\ud83d\udecb\ufe0f",name:"Living Room"},dining:{icon:"\ud83c\udf7d\ufe0f",name:"Dining Room"}}[n.class]||{icon:"\ud83d\udce6",name:"Room"};return{id:"room-".concat(e),type:"room",position:{x:n.x-n.width/2,y:n.y-n.height/2},data:{label:"".concat(o.name," ").concat(e+1),icon:o.icon,size:"".concat(Math.round(n.width),"\xd7").concat(Math.round(n.height)),deviceCount:0,confidence:n.confidence},sourcePosition:t.yX.Right,targetPosition:t.yX.Left}})))||[];e(i),M("Detected ".concat(i.length," rooms successfully!"))}catch(s){console.error("Room detection failed:",s),M("Room detection failed. You can add rooms manually."),e([{id:"room-1",type:"room",position:{x:200,y:100},data:{label:"Sample Room",icon:"\ud83c\udfe0",size:"200\xd7150",deviceCount:0},sourcePosition:t.yX.Right,targetPosition:t.yX.Left}])}finally{w(!1)}},style:{display:"none"}}),(0,b.jsx)("button",{className:"btn-primary",onClick:()=>{var n;return null===(n=S.current)||void 0===n?void 0:n.click()},disabled:j,children:j?"\ud83d\udd04 Analyzing...":"\ud83d\udcc1 Import Floor Plan"}),(0,b.jsx)("button",{className:"btn-secondary",onClick:()=>{const n=["\ud83d\udecf\ufe0f","\ud83c\udf73","\ud83d\udecb\ufe0f","\ud83d\udebf","\ud83c\udfe2","\ud83d\udcda"],o=n[Math.floor(Math.random()*n.length)],a={id:"room-".concat(Date.now()),type:"room",position:{x:150,y:150},data:{label:"New Room",icon:o,size:"150\xd7120",deviceCount:0},sourcePosition:t.yX.Right,targetPosition:t.yX.Left};e((n=>[...n,a])),M("Room added manually")},children:"\ud83c\udfe0 Add Room"}),(0,b.jsx)("button",{className:"btn-danger",onClick:()=>{L(!0)},children:"\ud83d\uddd1\ufe0f Clear"})]}),(0,b.jsx)("div",{className:"status",children:(0,b.jsx)("span",{children:R})})]}),(0,b.jsxs)("div",{className:"main-content",children:[(0,b.jsx)("div",{className:"flow-container",children:(0,b.jsxs)(t.Gc,{nodes:n,edges:u,onNodesChange:o,onEdgesChange:v,onConnect:P,nodeTypes:g,connectionMode:t.WZ.Loose,fitView:!0,style:{backgroundImage:k?"url(".concat(k,")"):"none",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:k?.3:1},children:[(0,b.jsx)(r.V,{color:"#f1f1f1",gap:20}),(0,b.jsx)(s.H,{}),(0,b.jsx)(c.o,{nodeColor:"#0d6efd",maskColor:"rgba(255, 255, 255, 0.2)",style:{background:"#f8f9fa"}})]})}),(0,b.jsxs)("div",{className:"device-library",children:[(0,b.jsx)("h3",{children:"Smart Devices"}),(0,b.jsx)("p",{className:"library-hint",children:"Click to add devices to your floor plan"}),(0,b.jsx)("div",{className:"device-grid",children:f.map((n=>(0,b.jsxs)("div",{className:"device-card",onClick:()=>(n=>{const o=f.find((e=>e.type===n));if(!o)return;const a={id:"device-".concat(Date.now()),type:"device",position:{x:400*Math.random()+100,y:300*Math.random()+100},data:{label:o.name,icon:o.icon,color:o.color,online:Math.random()>.3,deviceType:o.type},sourcePosition:t.yX.Right,targetPosition:t.yX.Left};e((n=>[...n,a])),M("".concat(o.name," added to floor plan"))})(n.type),children:[(0,b.jsx)("div",{className:"device-card-icon",style:{color:n.color},children:n.icon}),(0,b.jsx)("div",{className:"device-card-name",children:n.name})]},n.type)))}),(0,b.jsxs)("div",{className:"library-stats",children:[(0,b.jsxs)("div",{className:"stat",children:[(0,b.jsx)("span",{className:"stat-number",children:n.filter((n=>"room"===n.type)).length}),(0,b.jsx)("span",{className:"stat-label",children:"Rooms"})]}),(0,b.jsxs)("div",{className:"stat",children:[(0,b.jsx)("span",{className:"stat-number",children:n.filter((n=>"device"===n.type)).length}),(0,b.jsx)("span",{className:"stat-label",children:"Devices"})]}),(0,b.jsxs)("div",{className:"stat",children:[(0,b.jsx)("span",{className:"stat-number",children:u.length}),(0,b.jsx)("span",{className:"stat-label",children:"Connections"})]})]})]})]}),(0,b.jsx)("style",{children:"\n        .floor-plan-app {\n          height: 100vh;\n          display: flex;\n          flex-direction: column;\n          background: #f8f9fa;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n        }\n\n        .toolbar {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 16px 24px;\n          background: white;\n          border-bottom: 1px solid #e9ecef;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n        }\n\n        .toolbar-section {\n          display: flex;\n          gap: 12px;\n        }\n\n        .btn-primary, .btn-secondary, .btn-danger {\n          padding: 10px 16px;\n          border: none;\n          border-radius: 6px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: 14px;\n        }\n\n        .btn-primary {\n          background: #0d6efd;\n          color: white;\n        }\n\n        .btn-primary:hover {\n          background: #0b5ed7;\n        }\n\n        .btn-primary:disabled {\n          background: #6c757d;\n          cursor: not-allowed;\n        }\n\n        .btn-secondary {\n          background: #6c757d;\n          color: white;\n        }\n\n        .btn-secondary:hover {\n          background: #5c636a;\n        }\n\n        .btn-danger {\n          background: #dc3545;\n          color: white;\n        }\n\n        .btn-danger:hover {\n          background: #c82333;\n        }\n\n        .status {\n          font-size: 14px;\n          color: #6c757d;\n          font-weight: 500;\n        }\n\n        .main-content {\n          flex: 1;\n          display: flex;\n          margin: 20px;\n          gap: 20px;\n        }\n\n        .flow-container {\n          flex: 1;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n          overflow: hidden;\n        }\n\n        .device-library {\n          width: 280px;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n          padding: 20px;\n          display: flex;\n          flex-direction: column;\n        }\n\n        .device-library h3 {\n          margin: 0 0 8px 0;\n          color: #333;\n          font-size: 18px;\n        }\n\n        .library-hint {\n          margin: 0 0 20px 0;\n          color: #6c757d;\n          font-size: 13px;\n        }\n\n        .device-grid {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 12px;\n          margin-bottom: 24px;\n        }\n\n        .device-card {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          padding: 16px 8px;\n          border: 1px solid #e9ecef;\n          border-radius: 8px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          background: white;\n        }\n\n        .device-card:hover {\n          border-color: #0d6efd;\n          background: #f8f9ff;\n          transform: translateY(-2px);\n          box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n        }\n\n        .device-card-icon {\n          font-size: 24px;\n          margin-bottom: 8px;\n        }\n\n        .device-card-name {\n          font-size: 12px;\n          color: #6c757d;\n          text-align: center;\n          font-weight: 500;\n        }\n\n        .library-stats {\n          display: flex;\n          justify-content: space-between;\n          padding-top: 20px;\n          border-top: 1px solid #e9ecef;\n        }\n\n        .stat {\n          text-align: center;\n        }\n\n        .stat-number {\n          display: block;\n          font-size: 20px;\n          font-weight: 600;\n          color: #0d6efd;\n        }\n\n        .stat-label {\n          font-size: 11px;\n          color: #6c757d;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        /* Custom Node Styles */\n        :global(.room-node) {\n          background: white;\n          border: 2px solid #0d6efd;\n          border-radius: 8px;\n          padding: 12px;\n          min-width: 140px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        }\n\n        :global(.room-header) {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          margin-bottom: 8px;\n        }\n\n        :global(.room-icon) {\n          font-size: 18px;\n        }\n\n        :global(.room-name) {\n          font-weight: 600;\n          color: #333;\n          font-size: 14px;\n        }\n\n        :global(.room-info) {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        :global(.room-size) {\n          font-size: 12px;\n          color: #6c757d;\n        }\n\n        :global(.room-devices) {\n          font-size: 11px;\n          color: #28a745;\n          font-weight: 500;\n        }\n\n        :global(.device-node) {\n          background: white;\n          border: 2px solid #28a745;\n          border-radius: 8px;\n          padding: 10px;\n          min-width: 120px;\n          text-align: center;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        }\n\n        :global(.device-icon) {\n          font-size: 20px;\n          margin-bottom: 6px;\n        }\n\n        :global(.device-name) {\n          font-size: 12px;\n          font-weight: 600;\n          color: #333;\n          margin-bottom: 6px;\n        }\n\n        :global(.device-status) {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 4px;\n          font-size: 10px;\n          color: #6c757d;\n        }\n\n        :global(.status-dot) {\n          width: 6px;\n          height: 6px;\n          border-radius: 50%;\n          background: #dc3545;\n        }\n\n        :global(.status-dot.online) {\n          background: #28a745;\n        }\n      "})]})}}}]);
//# sourceMappingURL=339.ff2903b1.chunk.js.map
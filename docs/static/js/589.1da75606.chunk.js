"use strict";(self.webpackChunkspatialsense_temp=self.webpackChunkspatialsense_temp||[]).push([[589],{5529:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Se});var a=s(9379),n=s(5043),i=s(6803),l=s(7253),r=s(2950),o=s(1244),d=s(3969),c=s(3849),h=s(5895),u=s(6128),m=s(7873),A=s(8128),x=s(579);const v=(0,A.Ay)(o.A,{shouldForwardProp:e=>"selected"!==e})((e=>{let{theme:t,selected:s}=e;return{cursor:"pointer",transition:"all 0.2s ease-in-out",borderLeft:s?"4px solid ".concat(t.palette.primary.main):"4px solid transparent","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[4]},marginBottom:t.spacing(2)}})),p=e=>{let{clients:t,selectedClient:s,onSelectClient:a,loading:n}=e;return n?(0,x.jsx)(d.A,{children:[...Array(5)].map(((e,t)=>(0,x.jsx)(c.A,{variant:"rectangular",height:80,sx:{mb:2}},t)))}):0===t.length?(0,x.jsx)(d.A,{textAlign:"center",py:4,children:(0,x.jsx)(h.A,{variant:"body1",color:"textSecondary",children:"No clients found"})}):(0,x.jsx)(d.A,{children:t.map((e=>(0,x.jsx)(v,{selected:(null===s||void 0===s?void 0:s.id)===e.id,onClick:()=>a(e),elevation:2,children:(0,x.jsx)(u.A,{children:(0,x.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,x.jsx)(m.A,{sx:{bgcolor:"primary.main",mr:2},children:e.name.charAt(0).toUpperCase()}),(0,x.jsxs)(d.A,{children:[(0,x.jsx)(h.A,{variant:"subtitle1",fontWeight:"medium",children:e.name}),(0,x.jsx)(h.A,{variant:"body2",color:"textSecondary",children:e.company||"No company"}),(0,x.jsx)(h.A,{variant:"caption",color:"textSecondary",children:e.email})]})]})})},e.id)))})};var j=s(45),y=s(4799),b=s(3759),g=s(2579),C=s(3309),f=s(2843),S=s(5315),w=s(2394),z=s(9801),N=s(6185),M=s(4527),E=s(4343),k=s(1859),L=s(1773),W=s(9992);const H=(0,W.A)((0,x.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),I=(0,W.A)((0,x.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),V=(0,W.A)((0,x.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone"),F=(0,W.A)((0,x.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business"),B=(0,W.A)((0,x.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),D=(0,W.A)((0,x.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z"}),"NoteAdd");var O=s(160);const q=(0,W.A)((0,x.jsx)("path",{d:"M17 12h-5v5h5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1zm3 18H5V8h14z"}),"Event"),K=["children","value","index"],T=(0,A.Ay)(y.A)((e=>{let{theme:t}=e;return{padding:t.spacing(3),height:"100%",display:"flex",flexDirection:"column"}})),P=(0,A.Ay)(b.A,{shouldForwardProp:e=>"statusvalue"!==e})((e=>{let{theme:t,statusvalue:s}=e;return{textTransform:"capitalize",backgroundColor:"active"===s?t.palette.success.light:"lead"===s?t.palette.warning.light:t.palette.error.light,color:t.palette.getContrastText("active"===s?t.palette.success.light:"lead"===s?t.palette.warning.light:t.palette.error.light)}}));function U(e){const{children:t,value:s,index:n}=e,i=(0,j.A)(e,K);return(0,x.jsx)("div",(0,a.A)((0,a.A)({role:"tabpanel",hidden:s!==n,id:"client-tabpanel-".concat(n),"aria-labelledby":"client-tab-".concat(n)},i),{},{children:s===n&&(0,x.jsx)(d.A,{sx:{p:3},children:t})}))}const Q=e=>{let{client:t,onEdit:s,onDelete:a,onAddNote:i}=e;const[l,r]=n.useState(0),[o,c]=n.useState("");if(!t)return(0,x.jsx)(T,{elevation:3,children:(0,x.jsx)(d.A,{textAlign:"center",py:4,children:(0,x.jsx)(h.A,{variant:"h6",color:"textSecondary",children:"Select a client to view details"})})});return(0,x.jsxs)(T,{elevation:3,children:[(0,x.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3,children:[(0,x.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,x.jsx)(m.A,{sx:{width:64,height:64,mr:2,fontSize:"2rem"},children:t.name.charAt(0).toUpperCase()}),(0,x.jsxs)(d.A,{children:[(0,x.jsxs)(d.A,{display:"flex",alignItems:"center",mb:1,children:[(0,x.jsx)(h.A,{variant:"h5",component:"h2",mr:2,children:t.name}),(0,x.jsx)(P,{label:t.status,size:"small",statusvalue:t.status})]}),(0,x.jsx)(h.A,{variant:"body2",color:"textSecondary",children:t.company||"No company specified"})]})]}),(0,x.jsxs)(d.A,{children:[(0,x.jsx)(g.A,{onClick:s,color:"primary",sx:{mr:1},children:(0,x.jsx)(L.A,{})}),(0,x.jsx)(g.A,{onClick:a,color:"error",children:(0,x.jsx)(H,{})})]})]}),(0,x.jsxs)(C.A,{value:l,onChange:(e,t)=>{r(t)},"aria-label":"client tabs",children:[(0,x.jsx)(f.A,{label:"Overview"}),(0,x.jsx)(f.A,{label:"Notes"}),(0,x.jsx)(f.A,{label:"Activity"})]}),(0,x.jsxs)(U,{value:l,index:0,children:[(0,x.jsxs)(d.A,{mb:4,children:[(0,x.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Contact Information"}),(0,x.jsxs)(S.A,{children:[(0,x.jsxs)(w.Ay,{children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(I,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Email",secondary:t.email||"Not provided"})]}),(0,x.jsx)(M.A,{variant:"inset",component:"li"}),(0,x.jsxs)(w.Ay,{children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(V,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Phone",secondary:t.phone||"Not provided"})]}),(0,x.jsx)(M.A,{variant:"inset",component:"li"}),(0,x.jsxs)(w.Ay,{children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(F,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Company",secondary:t.company||"Not provided"})]}),t.address&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M.A,{variant:"inset",component:"li"}),(0,x.jsxs)(w.Ay,{children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(B,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Address",secondary:"string"===typeof t.address?t.address||"Not provided":"".concat(t.address.street||"").concat(t.address.city?", ".concat(t.address.city):"").concat(t.address.state?", ".concat(t.address.state):"").concat(t.address.postalCode?", ".concat(t.address.postalCode):"").concat(t.address.country?", ".concat(t.address.country):"")||"Not provided"})]})]})]})]}),(0,x.jsxs)(d.A,{children:[(0,x.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Additional Information"}),(0,x.jsx)(h.A,{variant:"body2",color:"textSecondary",paragraph:!0,children:t.notes||"No additional information available."})]})]}),(0,x.jsx)(U,{value:l,index:1,children:(0,x.jsxs)(d.A,{mb:3,children:[(0,x.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Add a Note"}),(0,x.jsxs)(d.A,{display:"flex",mb:3,children:[(0,x.jsx)(E.A,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Add a note about this client...",value:o,onChange:e=>c(e.target.value),sx:{mr:2}}),(0,x.jsx)(k.A,{variant:"contained",color:"primary",onClick:()=>{o.trim()&&(i(o),c(""))},startIcon:(0,x.jsx)(D,{}),disabled:!o.trim(),sx:{alignSelf:"flex-start"},children:"Add Note"})]}),(0,x.jsx)(M.A,{sx:{my:2}}),(0,x.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Recent Notes"}),(0,x.jsx)(S.A,{children:(0,x.jsxs)(w.Ay,{alignItems:"flex-start",children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(O.A,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Initial consultation completed",secondary:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.A,{component:"span",variant:"body2",color:"text.primary",display:"block",mb:1,children:"John Doe - May 25, 2025"}),"Discussed project requirements and timeline. Client is interested in a full property analysis."]})})]})})]})}),(0,x.jsxs)(U,{value:l,index:2,children:[(0,x.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),(0,x.jsxs)(S.A,{children:[(0,x.jsxs)(w.Ay,{children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(q,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Client created",secondary:"May 20, 2025"})]}),(0,x.jsx)(M.A,{variant:"inset",component:"li"}),(0,x.jsxs)(w.Ay,{children:[(0,x.jsx)(z.A,{children:(0,x.jsx)(q,{color:"action"})}),(0,x.jsx)(N.A,{primary:"Initial contact made",secondary:"May 21, 2025"})]})]})]})]})};var R=s(8517),G=s(1911),Y=s(8776),Z=s(256),_=s(9067),J=s(4938),$=s(7471),X=s(5877),ee=s(7421);const te=e=>{var t,s,i,r,o;let{open:c,onClose:u,onSubmit:m,initialData:A,loading:v=!1}=e;const[p,j]=n.useState(A?{name:A.name,email:A.email,phone:A.phone,company:A.company,status:A.status,address:A.address,notes:A.notes}:{name:"",email:"",phone:"",company:"",status:"active",address:{street:"",city:"",state:"",postalCode:"",country:""},notes:""});n.useEffect((()=>{j(A?{name:A.name,email:A.email,phone:A.phone,company:A.company,status:A.status,address:A.address,notes:A.notes}:{name:"",email:"",phone:"",company:"",status:"active",address:{street:"",city:"",state:"",postalCode:"",country:""},notes:""})}),[A,c]);const y=e=>{const{name:t,value:s}=e.target;if(t.includes(".")){const[e,n]=t.split(".");j((t=>(0,a.A)((0,a.A)({},t),{},{[e]:(0,a.A)((0,a.A)({},t[e]||{}),{},{[n]:s})})))}else j((e=>(0,a.A)((0,a.A)({},e),{},{[t]:s})))};return(0,x.jsxs)(R.A,{open:c,onClose:u,maxWidth:"md",fullWidth:!0,children:[(0,x.jsx)(G.A,{children:(0,x.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,x.jsx)(h.A,{variant:"h6",children:A?"Edit Client":"Add New Client"}),(0,x.jsx)(g.A,{onClick:u,disabled:v,children:(0,x.jsx)(ee.A,{})})]})}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m(p)},children:[(0,x.jsx)(Y.A,{dividers:!0,children:(0,x.jsxs)(l.A,{container:!0,spacing:3,children:[(0,x.jsxs)(l.A,{size:{xs:12,md:6},children:[(0,x.jsx)(h.A,{variant:"subtitle1",gutterBottom:!0,children:"Basic Information"}),(0,x.jsx)(E.A,{fullWidth:!0,label:"Full Name",name:"name",value:p.name,onChange:y,margin:"normal",required:!0,disabled:v}),(0,x.jsx)(E.A,{fullWidth:!0,label:"Email",name:"email",type:"email",value:p.email,onChange:y,margin:"normal",required:!0,disabled:v}),(0,x.jsx)(E.A,{fullWidth:!0,label:"Phone",name:"phone",value:p.phone,onChange:y,margin:"normal",disabled:v}),(0,x.jsx)(E.A,{fullWidth:!0,label:"Company",name:"company",value:p.company,onChange:y,margin:"normal",disabled:v}),(0,x.jsxs)(Z.A,{fullWidth:!0,margin:"normal",children:[(0,x.jsx)(_.A,{id:"status-label",children:"Status"}),(0,x.jsxs)(J.A,{labelId:"status-label",name:"status",value:p.status,onChange:e=>j((t=>(0,a.A)((0,a.A)({},t),{},{status:e.target.value}))),label:"Status",disabled:v,children:[(0,x.jsx)($.A,{value:"active",children:"Active"}),(0,x.jsx)($.A,{value:"inactive",children:"Inactive"}),(0,x.jsx)($.A,{value:"lead",children:"Lead"})]})]})]}),(0,x.jsxs)(l.A,{size:{xs:12,md:6},children:[(0,x.jsx)(h.A,{variant:"subtitle1",gutterBottom:!0,children:"Address"}),(0,x.jsx)(E.A,{fullWidth:!0,label:"Street Address",name:"address.street",value:"object"===typeof p.address&&(null===(t=p.address)||void 0===t?void 0:t.street)||"",onChange:y,margin:"normal",disabled:v}),(0,x.jsxs)(l.A,{container:!0,spacing:2,children:[(0,x.jsx)(l.A,{size:{xs:12,sm:6},children:(0,x.jsx)(E.A,{fullWidth:!0,label:"City",name:"address.city",value:"object"===typeof p.address&&(null===(s=p.address)||void 0===s?void 0:s.city)||"",onChange:y,margin:"normal",disabled:v})}),(0,x.jsx)(l.A,{size:{xs:12,sm:6},children:(0,x.jsx)(E.A,{fullWidth:!0,label:"State/Province",name:"address.state",value:"object"===typeof p.address&&(null===(i=p.address)||void 0===i?void 0:i.state)||"",onChange:y,margin:"normal",disabled:v})})]}),(0,x.jsxs)(l.A,{container:!0,spacing:2,children:[(0,x.jsx)(l.A,{size:{xs:12,sm:6},children:(0,x.jsx)(E.A,{fullWidth:!0,label:"Postal Code",name:"address.postalCode",value:"object"===typeof p.address&&(null===(r=p.address)||void 0===r?void 0:r.postalCode)||"",onChange:y,margin:"normal",disabled:v})}),(0,x.jsx)(l.A,{size:{xs:12,sm:6},children:(0,x.jsx)(E.A,{fullWidth:!0,label:"Country",name:"address.country",value:"object"===typeof p.address&&(null===(o=p.address)||void 0===o?void 0:o.country)||"",onChange:y,margin:"normal",disabled:v})})]})]}),(0,x.jsx)(l.A,{size:{xs:12},children:(0,x.jsx)(E.A,{fullWidth:!0,label:"Notes",name:"notes",value:p.notes||"",onChange:y,margin:"normal",multiline:!0,rows:4,disabled:v})})]})}),(0,x.jsxs)(X.A,{sx:{p:2},children:[(0,x.jsx)(k.A,{onClick:u,disabled:v,children:"Cancel"}),(0,x.jsx)(k.A,{type:"submit",variant:"contained",color:"primary",disabled:v||!p.name||!p.email,children:v?"Saving...":"Save Client"})]})]})]})};var se,ae,ne,ie,le,re=s(3248),oe=s(2532),de=s(9790),ce=s(5149),he=s(8458),ue=s(6562),me=s(4558),Ae=s(5239),xe=s(1454),ve=s(329),pe=s(9723),je=(se=new WeakMap,ae=new WeakMap,ne=new WeakMap,ie=new WeakMap,le=new WeakSet,class extends ve.Q{constructor(e,t){super(),(0,de.A)(this,le),(0,ce.A)(this,se,void 0),(0,ce.A)(this,ae,void 0),(0,ce.A)(this,ne,void 0),(0,ce.A)(this,ie,void 0),(0,me.A)(se,this,e),this.setOptions(t),this.bindMethods(),(0,ue.A)(le,this,ye).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=(0,he.A)(se,this).defaultMutationOptions(e),(0,pe.f8)(this.options,s)||(0,he.A)(se,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,he.A)(ne,this),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&(0,pe.EN)(s.mutationKey)!==(0,pe.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(t=(0,he.A)(ne,this))||void 0===t?void 0:t.state.status)&&(0,he.A)(ne,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,he.A)(ne,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,ue.A)(le,this,ye).call(this),(0,ue.A)(le,this,be).call(this,e)}getCurrentResult(){return(0,he.A)(ae,this)}reset(){var e;null===(e=(0,he.A)(ne,this))||void 0===e||e.removeObserver(this),(0,me.A)(ne,this,void 0),(0,ue.A)(le,this,ye).call(this),(0,ue.A)(le,this,be).call(this)}mutate(e,t){var s;return(0,me.A)(ie,this,t),null===(s=(0,he.A)(ne,this))||void 0===s||s.removeObserver(this),(0,me.A)(ne,this,(0,he.A)(se,this).getMutationCache().build((0,he.A)(se,this),this.options)),(0,he.A)(ne,this).addObserver(this),(0,he.A)(ne,this).execute(e)}});function ye(){var e,t;const s=null!==(e=null===(t=(0,he.A)(ne,this))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,Ae.$)();(0,me.A)(ae,this,(0,a.A)((0,a.A)({},s),{},{isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset}))}function be(e){xe.jG.batch((()=>{if((0,he.A)(ie,this)&&this.hasListeners()){const d=(0,he.A)(ae,this).variables,c=(0,he.A)(ae,this).context;var t,s,a,n;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(s=(0,he.A)(ie,this)).onSuccess)||void 0===t||t.call(s,e.data,d,c),null===(a=(n=(0,he.A)(ie,this)).onSettled)||void 0===a||a.call(n,e.data,null,d,c);else if("error"===(null===e||void 0===e?void 0:e.type)){var i,l,r,o;null===(i=(l=(0,he.A)(ie,this)).onError)||void 0===i||i.call(l,e.error,d,c),null===(r=(o=(0,he.A)(ie,this)).onSettled)||void 0===r||r.call(o,void 0,e.error,d,c)}}this.listeners.forEach((e=>{e((0,he.A)(ae,this))}))}))}function ge(e,t){const s=(0,re.jE)(t),[i]=n.useState((()=>new je(s,e)));n.useEffect((()=>{i.setOptions(e)}),[i,e]);const l=n.useSyncExternalStore(n.useCallback((e=>i.subscribe(xe.jG.batchCalls(e))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),r=n.useCallback(((e,t)=>{i.mutate(e,t).catch(pe.lQ)}),[i]);if(l.error&&(0,pe.GU)(i.options.throwOnError,[l.error]))throw l.error;return(0,a.A)((0,a.A)({},l),{},{mutate:r,mutateAsync:l.mutate})}var Ce=s(3637);var fe=s(5046);const Se=()=>{const{filteredClients:e,loading:t,error:s,searchTerm:o,setSearchTerm:d,statusFilter:c,setStatusFilter:h,sortBy:u,setSortBy:m,addClient:A,updateClient:v,deleteClient:j}=(()=>{const e=(0,re.jE)(),{data:t=[],isLoading:s,error:a}=(0,oe.I)({queryKey:["clients"],queryFn:Ce.Lf}),i=ge({mutationFn:Ce.UU,onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]})}}),l=ge({mutationFn:e=>{let{id:t,data:s}=e;return(0,Ce.zO)(t,s)},onSuccess:(t,s)=>{let{id:a}=s;e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["clients",a]})}}),r=ge({mutationFn:Ce.zZ,onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]})}}),[o,d]=(0,n.useState)(""),[c,h]=(0,n.useState)("all"),[u,m]=(0,n.useState)("name-asc"),A=(0,n.useMemo)((()=>{let e=[...t];if(o){const t=o.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.company&&e.company.toLowerCase().includes(t)))}return"all"!==c&&(e=e.filter((e=>e.status===c))),e.sort(((e,t)=>{switch(u){case"name-asc":return e.name.localeCompare(t.name);case"name-desc":return t.name.localeCompare(e.name);case"date-asc":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();case"date-desc":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();default:return 0}})),e}),[t,o,c,u]);return{clients:t,filteredClients:A,loading:s,error:a,searchTerm:o,setSearchTerm:d,statusFilter:c,setStatusFilter:h,sortBy:u,setSortBy:m,addClient:i.mutateAsync,updateClient:l.mutateAsync,deleteClient:r.mutateAsync,useClient:e=>(0,oe.I)({queryKey:["clients",e],queryFn:()=>(0,Ce.KU)(e),enabled:!!e})}})(),[y,b]=(0,n.useState)(null),[g,C]=(0,n.useState)(!1),[f,S]=(0,n.useState)(null),[w,z]=(0,n.useState)(!1);return s?(0,x.jsxs)(fe.LN,{children:[(0,x.jsx)(fe.zY,{title:"Clients"}),(0,x.jsxs)(i.A,{severity:"error",sx:{mt:2},children:["Error loading clients: ",s.message]})]}):(0,x.jsxs)(fe.LN,{children:[(0,x.jsx)(fe.zY,{title:"Clients",subtitle:"Manage your client relationships and information",actions:[{label:"Add Client",onClick:()=>{S(null),C(!0)},icon:(0,x.jsx)(r.A,{}),disabled:w}],loading:t}),(0,x.jsx)(fe.Qn,{searchTerm:o,onSearchChange:d,searchPlaceholder:"Search clients...",filters:[{id:"status",label:"Status",value:c,onChange:h,options:[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"lead",label:"Lead"}]},{id:"sort",label:"Sort By",value:u,onChange:m,options:[{value:"name-asc",label:"Name (A-Z)"},{value:"name-desc",label:"Name (Z-A)"},{value:"date-asc",label:"Oldest First"},{value:"date-desc",label:"Newest First"}]}],resultCount:e.length,resultLabel:1===e.length?"client":"clients",loading:t}),(0,x.jsxs)(l.A,{container:!0,spacing:2,children:[(0,x.jsx)(l.A,{size:{xs:12,md:4},children:(0,x.jsx)(p,{clients:e,selectedClient:y,onSelectClient:e=>{b(e)},loading:t})}),(0,x.jsx)(l.A,{size:{xs:12,md:8},children:(0,x.jsx)(Q,{client:y,onEdit:()=>{y&&(S(y),C(!0))},onDelete:async()=>{if(y&&window.confirm("Are you sure you want to delete ".concat(y.name,"?")))try{z(!0),await j(y.id),b(null)}catch(s){console.error("Error deleting client:",s)}finally{z(!1)}},onAddNote:e=>{if(y){const t=y.notes?"".concat(y.notes,"\n\n--- ").concat((new Date).toLocaleDateString()," ---\n").concat(e):e;v({id:y.id,data:{notes:t}}).then((()=>{b((e=>e?(0,a.A)((0,a.A)({},e),{},{notes:t}):null))}))}}})})]}),(0,x.jsx)(te,{open:g,onClose:()=>{C(!1),S(null)},onSubmit:async e=>{try{if(z(!0),f)await v({id:f.id,data:e});else{const t=await A(e);b(t)}C(!1),S(null)}catch(s){console.error("Error saving client:",s)}finally{z(!1)}},initialData:f,loading:w}),(0,x.jsx)(fe.p8,{loading:w,variant:"overlay"})]})}}}]);
//# sourceMappingURL=589.1da75606.chunk.js.map
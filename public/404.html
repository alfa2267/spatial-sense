<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Loading...</title>
  <script>
    (function() {
      // This is a simple SPA fallback for GitHub Pages
      // It redirects all 404s to index.html with the correct hash route
      
      const path = window.location.pathname;
      const base = '/spatial-sense';
      
      console.log('404 redirect script running. Path:', path);
      
      // Extract the route part after the base
      let route = path.startsWith(base) ? path.slice(base.length) : path;
      
      // Clean up the route (remove leading/trailing slashes and index.html)
      route = route.replace(/^\/+|\/+$/g, '').replace(/index\.html$/, '');
      
      console.log('Extracted route:', route);
      
      // Always redirect to the hash-based URL with the route
      const newUrl = window.location.origin + base + '/#/' + (route || 'dashboard');
      
      console.log('Redirecting to:', newUrl);
      
      if (window.location.href !== newUrl) {
        window.location.replace(newUrl);
      }
    })();
  </script>
  <noscript>
    <meta http-equiv="refresh" content="0; url=/spatial-sense/#/dashboard">
  </noscript>
</head>
<body>
  <p>Loading application...</p>
</body>
</html>
